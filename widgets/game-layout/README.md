## Name
GameLayout

## Purpose
Отрисовывает основной интерфейс настольного хоррор-приключения «Whisper of Horror». Компонент собирает каркас игры: верхний заголовок, триколоночную основную зону с картами игрока, состоянием мира и событиями, а также нижний прокручиваемый лог.

## Visual Overview
```
┌──────────────────────────────────────────────────────────────────────────┐
│ HEADER: [WH LOGO]                                   [Новая][Настройки][🔊]│
├──────────────────────────────────────────────────────────────────────────┤
│ PLAYER (30%)      │ WORLD PANEL (40%)                │ EVENTS (30%)      │
│ ┌───────────────┐ │ ┌───────────────┐ ┌───────────┐ │ ┌───────────────┐ │
│ │Ресурсы        │ │ │Треки победы  │ │Статусы    │ │ │Текущее событие│ │
│ │○○○ Действия  │ │ │██████░░░░     │ │Здоровье   │ │ │Flavor + эффект│ │
│ │Колода/Сброс   │ │ │██░░░░░░      │ │Рассудок   │ │ │Варианты кнопки│ │
│ └───────────────┘ │ ├───────────────┤ ├───────────┤ │ └───────────────┘ │
│ ┌───────────────┐ │ │Фаза, эффекты │ │NPC row    │ │ ┌───────────────┐ │
│ │Рука (до 5)    │ │ └───────────────┘ └───────────┘ │ │Колода/сброс   │ │
│ │[карта][карта] │ │                                   │ └───────────────┘ │
├──────────────────────────────────────────────────────────────────────────┤
│ LOG (20-25% высоты)                                                     │
│ [ХОД 5 · Событие] текст                                                 │
│ [Действие] текст                                                        │
└──────────────────────────────────────────────────────────────────────────┘
```

- Фон: тёмно-зелёный, с лёгким свечением.
- Акцент «Расследование»: бирюзово-зелёные полосы, «Разрушение»: красно-ржавые огни.
- Карточки игрока и NPC — закруглённые прямоугольники с мягким свечением и границами.
- Жетоны действий — три окружности; неактивные могут терять подсветку.
- Лог занимает нижние 20–25% и прокручивается.
- Hover/фокус карточек — лёгкий подъём и подсветка контура.

### State variants
- **Карты руки:** обычные, при наведении/клике увеличивают контраст и показывают тултип. Непроигрываемые отображаются с приглушённой насыщенностью.
- **Статусы персонажа:** при критических значениях блок подсвечивается и пульсирует.
- **Эффекты/NPC:** чипы и карточки показывают тултипы, при активации фиксируются.
- **Лог:** новые записи можно добавлять скриптово; скролл авто-прокручивается CSS.

## Behavior
- В конструкторе компонент вставляет готовую разметку и подключает стили.
- Клик или клавиша `Enter`/`Space` по элементам с тултипом переключает их состояние `data-expanded`, обеспечивая работу на тач-устройствах.
- Hover/фокус активируют CSS-тултип с подробностями (карты, эффекты, NPC).
- Карточки руки, эффекты и NPC используют класс `woh-tooltip` для вывода всплывающих описаний.
- Лог оформлен как прокручиваемый список; новые записи можно добавлять через DOM-операции, логическая часть пока статична.

## API (Props / Inputs / Outputs)
| Name | Type | Default | Description |
|------|------|---------|-------------|
| `root` | `HTMLElement` | — | Контейнер, в который будет встроен интерфейс. Передаётся в конструктор. |

## States and Examples
- **Стандартное состояние:** как в шаблоне — все действия доступны, треки показывают прогресс, лог содержит последние записи.
- **Критический рассудок:** карточка `Рассудок` получает класс `is-critical` и начинает анимированно пульсировать.
- **Непроигрываемые карты:** карточка получает атрибут `data-playable="false"` — CSS понижает яркость.
- **Активированный тултип:** элемент получает `data-expanded="true"`, что фиксирует подсказку открытой до следующего взаимодействия.
- **Адаптивность < 900px:** колонки выстраиваются в один столбец (центр → события → колода), лог растягивается на всю ширину.
- **Адаптивность < 600px:** уменьшаются внешние отступы, кнопки хедера и блоки события переходят в колонку, чтобы исключить горизонтальную прокрутку.
- **Адаптивность < 480px:** панель действий и индикаторы ресурсов тянутся на всю ширину, стоимости карт перестраиваются в столбец, треки кампании и списки NPC выстраиваются вертикально.
- **Адаптивность < 380px:** сокращаются внутренние отступы и размеры шрифтов, блок события и журнал получают компактное оформление для экранов ≈320px.

## Lifecycle
- **Инициализация:** вызвать `new GameLayout(root)`. В этот момент проверяется валидность контейнера, инжектятся стили (одноразово) и вставляется шаблон.
- **Обновление:** предусмотрено добавление/удаление элементов через манипуляции DOM вне класса. Для будущих обновлений можно расширить класс методами.
- **Уничтожение:** вызвать `root.innerHTML = ""` вне компонента, если нужно очистить интерфейс; дополнительных слушателей, кроме навешенных на элементы, нет.
- **Зависимости:** встроенные шрифты JetBrains, глобальный `public/style.css` для базовых настроек, никаких внешних библиотек.

## Integration Example
```ts
import { GameLayout } from "../widgets/game-layout/game-layout";

const mount = document.getElementById("app");
if (!mount) throw new Error("Missing #app container");

const layout = new GameLayout(mount);
// Дополнительная логика (обновление логов, смена фаз) реализуется поверх layout.root
```
