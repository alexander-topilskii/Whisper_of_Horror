## Name
GameLayout

## Purpose
ะััะธัะพะฒัะฒะฐะตั ะพัะฝะพะฒะฝะพะน ะธะฝัะตััะตะนั ะฝะฐััะพะปัะฝะพะณะพ ัะพััะพั-ะฟัะธะบะปััะตะฝะธั ยซWhisper of Horrorยป. ะะพะผะฟะพะฝะตะฝั ัะพะฑะธัะฐะตั ะบะฐัะบะฐั ะธะณัั: ะฒะตััะฝะธะน ะทะฐะณะพะปะพะฒะพะบ ะธ ัะตัััััะบะพะปะพะฝะพัะฝัั ะพัะฝะพะฒะฝัั ะทะพะฝั ั ะถััะฝะฐะปะพะผ ัะพะดะฐ, ััะบะพะน ะธะณัะพะบะฐ, ัะพััะพัะฝะธะตะผ ะผะธัะฐ ะธ ัะตะบััะธะผ ัะพะฑััะธะตะผ. ะััะฝะฐะป ะทะฐะบัะตะฟะปัะฝ ะฒ ะฟะตัะฒะพะน ะบะพะปะพะฝะบะต ะธ ะฝะฐะฟััะผัั ะฝะฐะฟะพะปะฝัะตััั ะดะฐะฝะฝัะผะธ ะธะท `GameState`, ะฟะพััะพะผั ะฒัะต ะฟะฐะฝะตะปะธ ัะธะฝััะพะฝะฝะพ ัะตะฐะณะธัััั ะฝะฐ ะพะฑะฝะพะฒะปะตะฝะธั ะพั `GameEngine`.

## Visual Overview
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ HEADER: [WH LOGO]                                   [ะะพะฒะฐั][ะะฐัััะพะนะบะธ][๐]โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ LOG (ัะธะบั.)   โ HAND (25%)      โ STATUS (35%)               โ EVENTS (25%)  โ
โ โโโโโโโโโโโโโ โ โโโโโโโโโโโโโโโ โ โโโโโโโโโโโโโโโโโ โโโโโโโโ โ โโโโโโโโโโโโโ โ
โ โะััะฝะฐะป     โ โ โะะตััััั      โ โ โะขัะตะบะธ ะฟะพะฑะตะดั  โ โNPC   โ โ โะกะพะฑััะธะต    โ โ
โ โ[ะะฐะฟะธัั]   โ โ โโโโ ะะตะนััะฒะธั โ โ โโโโโโโโโ      โ โrow   โ โ โFlavor     โ โ
โ โ[ะะฐะฟะธัั]   โ โ โะะพะปะพะดะฐ/ะกะฑัะพั โ โ โโโโโโโโโโโโโโโโโค โโโโโโโโค โ โะัะฑะพั      โ โ
โ โ...        โ โ โะัะบะฐ (5)     โ โ โะคะฐะทะฐ/ััะฐัััั  โ โะกัะฐััโ โ โะะพะปะพะดะฐ     โ โ
โ โโโโโโโโโโโโโ โ โโโโโโโโโโโโโโโ โ โโโโโโโโโโโโโโโโโ โโโโโโโโ โ โโโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

- ะคะพะฝ: ััะผะฝะพ-ะทะตะปัะฝัะน, ั ะปัะณะบะธะผ ัะฒะตัะตะฝะธะตะผ.
- ะะบัะตะฝั ยซะะฐััะปะตะดะพะฒะฐะฝะธะตยป: ะฑะธััะทะพะฒะพ-ะทะตะปัะฝัะต ะฟะพะปะพัั, ยซะะฐะทัััะตะฝะธะตยป: ะบัะฐัะฝะพ-ัะถะฐะฒัะต ะพะณะฝะธ.
- ะะฐััะพัะบะธ ะธะณัะพะบะฐ ะธ NPC โ ะทะฐะบััะณะปัะฝะฝัะต ะฟััะผะพัะณะพะปัะฝะธะบะธ ั ะผัะณะบะธะผ ัะฒะตัะตะฝะธะตะผ ะธ ะณัะฐะฝะธัะฐะผะธ.
- ะะตัะพะฝั ะดะตะนััะฒะธะน โ ััะธ ะพะบััะถะฝะพััะธ; ะฝะตะฐะบัะธะฒะฝัะต ะผะพะณัั ัะตัััั ะฟะพะดัะฒะตัะบั.
- ะะพะณ ะทะฐะบัะตะฟะปัะฝ ะฒ ะฟะตัะฒะพะน ะบะพะปะพะฝะบะต, ัะฐัััะณะธะฒะฐะตััั ะฝะฐ ะฒัั ะฒััะพัั ะฟะฐะฝะตะปะธ ะธ ะฟัะพะบัััะธะฒะฐะตััั ะพัะดะตะปัะฝะพ ะพั ะพััะฐะปัะฝัั ะฑะปะพะบะพะฒ.
- Hover/ัะพะบัั ะบะฐััะพัะตะบ โ ะปัะณะบะธะน ะฟะพะดััะผ ะธ ะฟะพะดัะฒะตัะบะฐ ะบะพะฝัััะฐ.

### State variants
- **ะะฐััั ััะบะธ:** ะพะฑััะฝัะต, ะฟัะธ ะฝะฐะฒะตะดะตะฝะธะธ/ะบะปะธะบะต ัะฒะตะปะธัะธะฒะฐัั ะบะพะฝััะฐัั ะธ ะฟะพะบะฐะทัะฒะฐัั ััะปัะธะฟ. ะะตะฟัะพะธะณััะฒะฐะตะผัะต ะพัะพะฑัะฐะถะฐัััั ั ะฟัะธะณะปัััะฝะฝะพะน ะฝะฐัััะตะฝะฝะพัััั.
- **ะกัะฐัััั ะฟะตััะพะฝะฐะถะฐ:** ะฟัะธ ะบัะธัะธัะตัะบะธั ะทะฝะฐัะตะฝะธัั ะฑะปะพะบ ะฟะพะดัะฒะตัะธะฒะฐะตััั ะธ ะฟัะปััะธััะตั.
- **ะญััะตะบัั/NPC:** ัะธะฟั ะธ ะบะฐััะพัะบะธ ะฟะพะบะฐะทัะฒะฐัั ััะปัะธะฟั, ะฟัะธ ะฐะบัะธะฒะฐัะธะธ ัะธะบัะธัััััั.
- **ะััะฝะฐะป:** ัะตะฝะดะตัะธััั ะฒะฝัััะธ ะฟะตัะฒะพะน ะบะพะปะพะฝะบะธ, ะธัะฟะพะปัะทัะตั ัะต ะถะต ััะธะปะธ ะฟะฐะฝะตะปะตะน ะธ ะฐะฒัะพัะบัะพะปะปะธั ะฝะพะฒัะต ะทะฐะฟะธัะธ ะฟัะธ ะฐะบัะธะฒะฝะพะผ ัะปะฐะณะต.

## Behavior
- ะ ะบะพะฝััััะบัะพัะต ะบะพะผะฟะพะฝะตะฝั ะฒััะฐะฒะปัะตั ะณะพัะพะฒัั ัะฐะทะผะตัะบั ะธ ะฟะพะดะบะปััะฐะตั ััะธะปะธ.
- ะะปะธะบ ะธะปะธ ะบะปะฐะฒะธัะฐ `Enter`/`Space` ะฟะพ ัะปะตะผะตะฝัะฐะผ ั ััะปัะธะฟะพะผ ะฟะตัะตะบะปััะฐะตั ะธั ัะพััะพัะฝะธะต `data-expanded`, ะพะฑะตัะฟะตัะธะฒะฐั ัะฐะฑะพัั ะฝะฐ ัะฐั-ััััะพะนััะฒะฐั.
- Hover/ัะพะบัั ะฐะบัะธะฒะธัััั CSS-ััะปัะธะฟ ั ะฟะพะดัะพะฑะฝะพัััะผะธ (ะบะฐััั, ัััะตะบัั, NPC).
- ะะฐััะพัะบะธ ััะบะธ, ัััะตะบัั ะธ NPC ะธัะฟะพะปัะทััั ะบะปะฐัั `woh-tooltip` ะดะปั ะฒัะฒะพะดะฐ ะฒัะฟะปัะฒะฐััะธั ะพะฟะธัะฐะฝะธะน.
- ะะตัะพะด `renderLog` ะพัะฒะตัะฐะตั ะทะฐ ะบะพะปะพะฝะบั ะถััะฝะฐะปะฐ: ะพะฝ ะณะตะฝะตัะธััะตั ัะปะตะผะตะฝัั, ัะฑัะฐััะฒะฐะตั ะฟัััะพะต ัะพััะพัะฝะธะต ะธ ัะฟัะฐะฒะปัะตั ะฐะฒัะพัะบัะพะปะปะพะผ.
- ะะปะพะบ ััะตะฝะฐัะธั ัะตะฝะดะตัะธััั ะผะตัะพะดะพะผ `renderScenario`: ัะฝะฐัะฐะปะฐ ะฟะพะบะฐะทัะฒะฐะตััั ะธะฝััะพ (`scenario.intro`), ะทะฐัะตะผ ะบะฐััะพัะบะฐ ะฐะบัะฐ (`scenario.firstTask`) ะธ ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะธะฝััะพะฝะธะทะธัะพะฒะฐะฝะฝัะต ััะปะพะฒะธั ะฟะพะฑะตะดั/ะฟะพัะฐะถะตะฝะธั.
- ะัะพะณัะตัั ััะตะบะพะฒ (`worldTracks`) ัะตะฟะตัั ัะพัะผะธััะตััั ะธะท JSON-ัะตะปะตะน: `technicalGoal` โ ััะตะบ ยซvictoryยป, `technicalFailCondition` โ ััะตะบ ยซdoomยป.

## Scenario JSON contract
- ะคะฐะนะป `src/data/scenario.json` ัะบัะฟะพััะธััะตั ะพะฑัะตะบั `{ "scenario": ScenarioState }`, ะบะพัะพััะน ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟะพะฟะฐะดะฐะตั ะฒ `GameState`.
- `scenario.intro` โ ะทะฐะณะพะปะพะฒะพะบ ะธ ะผะฐััะธะฒ ััะฐะท, ะพัะพะฑัะฐะถะฐะตะผัั ะฒ ะฑะปะพะบะต ะฒัััะฟะปะตะฝะธั.
- `scenario.firstTask` ะพะฟะธััะฒะฐะตั ะฐะบัะธะฒะฝัะน ะฐะบั:
  - `summary` ะธ `goal`/`failCondition` โ ัะตะบััะพะฒัะต ะพะฟะธัะฐะฝะธั.
  - `technicalGoal` (`label`, `resource`, `requiredAmount`, `currentAmount`) ะพะฟัะตะดะตะปัะตั ัะตะปะตะฒะพะน ัะตัััั ะฟะพะฑะตะดั ะธ ะบะพะปะธัะตััะฒะพ ะดะตะปะตะฝะธะน ััะตะบะฐ.
  - `technicalFailCondition` ั ัะตะผะธ ะถะต ะฟะพะปัะผะธ ะทะฐะดะฐัั ััะตะบ ัะถะฐัะฐ/ะฟะพัะฐะถะตะฝะธั.
- UI ะธัะฟะพะปัะทัะตั `firstTask.label` ะบะฐะบ ะทะฐะณะพะปะพะฒะพะบ ะฟะฐะฝะตะปะธ ะธ ัะธะฝััะพะฝะธะทะธััะตั ะพัะพะฑัะฐะถะตะฝะธะต ะฟัะพะณัะตััะฐ (`currentAmount / requiredAmount`) ะบะฐะบ ะฒะฝัััะธ ะบะฐััะพัะบะธ ะฐะบัะฐ, ัะฐะบ ะธ ะฝะฐ ััะตะบะฐั ะฟะพะฑะตะดั/ัะถะฐัะฐ.

## API (Props / Inputs / Outputs)
| Name | Type | Default | Description |
|------|------|---------|-------------|
| `root` | `HTMLElement` | โ | ะะพะฝัะตะนะฝะตั, ะฒ ะบะพัะพััะน ะฑัะดะตั ะฒัััะพะตะฝ ะธะฝัะตััะตะนั. ะะตัะตะดะฐัััั ะฒ ะบะพะฝััััะบัะพั. |
| `bind(engine)` | `GameEngine` | โ | ะัะธะฒัะทัะฒะฐะตั layout ะบ ัะบะทะตะผะฟะปััั `GameEngine` ะธ ะฒะบะปััะฐะตั ะพะฑัะฐะฑะพัะบั ะบะพะผะฐะฝะด. |
| `render(state)` | `GameState` | โ | ะะพะปะฝะพัััั ะฟะตัะตัะธัะพะฒัะฒะฐะตั UI ะฟะพ ัะตะบััะตะผั ัะฝะธะผะบั ัะพััะพัะฝะธั. ะัะทัะฒะฐะตััั ะดะฒะธะถะบะพะผ ะธะปะธ ะฟะพะดะฟะธััะธะบะพะผ. |

## States and Examples
- **ะกัะฐะฝะดะฐััะฝะพะต ัะพััะพัะฝะธะต:** `render` ัะพะทะดะฐัั ะบะฐััะพัะบะธ ััะบะธ, ะธะฝะดะธะบะฐัะพัั ะบะพะปะพะดั, ััะตะบะธ ะธ ะปะพะณ ัะพะณะปะฐัะฝะพ ะดะฐะฝะฝัะผ ะธะท `GameState`.
- **ะัะธัะธัะตัะบะธะน ัะฐัััะดะพะบ:** ะบะฐััะพัะบะฐ `ะะฐัััะดะพะบ` ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟะพะปััะฐะตั ะบะปะฐัั `is-critical`, ะบะพะณะดะฐ `value <= criticalThreshold`.
- **ะะตะฟัะพะธะณััะฒะฐะตะผัะต ะบะฐััั:** `data-playable="false"` ะฟะพะดัะฒะตัะธะฒะฐะตั ะฝะตะดะพัััะฟะฝัะต ะบะฐััั, ะบะพะผะฐะฝะดะฐ `PlayCardCommand` ัะตะณะธัััะธััะตั ะฟะพะฟััะบั ะฒ ะปะพะณะต.
- **ะะบัะธะฒะธัะพะฒะฐะฝะฝัะน ััะปัะธะฟ:** ะบะปะธะบ ะฟะพ ัะปะตะผะตะฝัั ั ะบะปะฐััะพะผ `woh-tooltip` ะฟะตัะตะบะปััะฐะตั `data-expanded`, ะฒัะต ะพััะฐะปัะฝัะต ััะปัะธะฟั ะทะฐะบััะฒะฐัััั.
- **ะะตะฐะบัะธั ะฝะฐ ะบะพะผะฐะฝะดั:** `data-command="play-card"` ะธ `data-command="resolve-choice"` ััะฐะฝัะปะธัััั ะฟะพะปัะทะพะฒะฐัะตะปััะบะธะต ะบะปะธะบะธ ะฒ `GameEngine.dispatch`.
- **ะะดะฐะฟัะธะฒะฝะพััั:** ะฟัะธ ัะธัะธะฝะต <900px ะฑะปะพะบะธ ะฟะตัะตัะพะดัั ะฒ ะพะดะธะฝ ััะพะปะฑะตั, ะฟัะธ <600px ะธ <380px ัะผะตะฝััะฐัััั ะพััััะฟั, ะฟะฐะฝะตะปะธ ะธ ะบะฝะพะฟะบะธ ััะฝัััั ะฝะฐ ะฒัั ัะธัะธะฝั.

- **ะะฝะธัะธะฐะปะธะทะฐัะธั:** ะฒัะทะฒะฐัั `new GameLayout(root)` โ ะธะฝะถะตะบััััั ััะธะปะธ, ัะพะทะดะฐัััั ะฑะฐะทะพะฒะฐั ัะฐะทะผะตัะบะฐ, ะฝะฐะฒะตัะธะฒะฐัััั ะดะตะปะตะณะธัะพะฒะฐะฝะฝัะต ะพะฑัะฐะฑะพััะธะบะธ ััะปัะธะฟะพะฒ ะธ ะบะพะผะฐะฝะด.
- **ะัะธะฒัะทะบะฐ:** `layout.bind(engine)` ัะพััะฐะฝัะตั ัััะปะบั ะฝะฐ `GameEngine` ะธ ะฐะบัะธะฒะธััะตั ะบะฝะพะฟะบะธ `ะะพะฒะฐั ะฟะฐััะธั`, `ะะฐัััะพะนะบะธ`, `๐/๐`, ะฐ ัะฐะบะถะต ะดะตะปะตะณะธัะพะฒะฐะฝะฝัะต ะบะปะธะบะธ ะฟะพ ะบะฐััะฐะผ ะธ ะฒะฐัะธะฐะฝัะฐะผ ัะพะฑััะธั.
- **ะะฑะฝะพะฒะปะตะฝะธะต:** `engine.subscribe((state) => layout.render(state))` ะธะปะธ ัััะฝะพะน ะฒัะทะพะฒ `render(state)` ะพะฑะฝะพะฒะปัะตั ะฒัะต ะดะธะฝะฐะผะธัะตัะบะธะต ะฑะปะพะบะธ.
- **ะฃะฝะธััะพะถะตะฝะธะต:** ะพัะธััะธัั ะบะพะฝัะตะนะฝะตั ะธ (ะฟัะธ ะฝะตะพะฑัะพะดะธะผะพััะธ) ะพัะฟะธัะฐัััั ะพั ะดะฒะธะถะบะฐ. ะะพะฟะพะปะฝะธัะตะปัะฝัั ัััะฝัั `removeEventListener` ะฝะต ััะตะฑัะตััั โ ะพะฑัะฐะฑะพััะธะบะธ ะฒะธััั ะฝะฐ ะบะพัะฝะตะฒะพะผ ะบะพะฝัะตะนะฝะตัะต.
- **ะะฐะฒะธัะธะผะพััะธ:** ัะพะปัะบะพ ะฑัะฐัะทะตัะฝัะน `structuredClone` ัะตัะตะท `GameEngine`; ะฒะฝะตัะฝะธะต ะฑะธะฑะปะธะพัะตะบะธ ะฝะต ะธัะฟะพะปัะทััััั.

## Integration Example
```ts
import initialState from "../../src/data/initial-state";
import { GameEngine, PlayCardCommand } from "../game-engine/game-engine";
import { GameLayout } from "../game-layout/game-layout";

const mount = document.getElementById("app");
if (!mount) throw new Error("Missing #app container");

const engine = new GameEngine(initialState);
const layout = new GameLayout(mount);

layout.bind(engine);
layout.render(engine.getState());

engine.subscribe((state) => layout.render(state));
engine.dispatch(new PlayCardCommand("lantern"));
```
