## Name
LogOverlayWidget

## Purpose
Перекрывающий журнал хода для «Whisper of Horror». Компонент создаёт плавающее окно поверх остального интерфейса, показывает историю событий и статус автопрокрутки, а также позволяет сворачивать отображение до последней записи.

## Visual Overview
```
┌──────────── Журнал хода ────────────┐
│ Журнал хода             [Свернуть] │  ← заголовок/драг-хэндл
│ Автопрокрутка: Вкл.                 │
├────────────────────────────────────┤
│ Последнее событие: [тип · текст]   │
├────────────────────────────────────┤
│ [Тип события]                      │
│ Текст события                      │  ← скроллируемый список
│ …                                   │
└────────────────────────────────────┘
```
- Фон: тёмно-зелёное стекло (rgba(5,12,11,0.92)) с blur и подсветкой.
- Контуры: бирюзовый градиент, радиус 18px, тени `0 18px 40px rgba(0,0,0,0.65)`.
- Размеры по умолчанию 360×300 px, `min-width: 280px`, `min-height: 160px`.
- Переключатель «Свернуть/Развернуть» — капсула с тонкой рамкой.
- В режиме `data-state="collapsed"` остаётся только заголовок и последняя запись.

## Behavior
- При создании вставляет в `<body>` элемент `section.woh-log-overlay` и подключает собственные стили (guard по `data-token`).
- Перерисовывается через `render(log, autoScroll)` — полностью пересобирает список, обновляет превью последней записи и текст «Автопрокрутка».
- При `autoScroll=true` и появлении новых записей автоматически прокручивает контейнер наверх (`scrollTo`).
- Кнопка `woh-log-overlay-toggle` переключает `data-state` между `expanded/collapsed`, меняя текст и `aria-expanded`.
- В режиме `collapsed` скрывает блок со списком и ресайзеры, оставляя заголовок + последнюю запись.
- Хэдер (`data-role="log-overlay-drag"`) выступает драг-хэндлом: `mousedown` + `mousemove` перемещают окно в пределах вьюпорта, курсор `grab`.
- Ресайзеры (`data-resize`) по всем сторонам и в правом нижнем углу позволяют менять ширину/высоту, клик и перетаскивание фиксируют минимум.
- Позиция и размеры фиксируются в inline-стилях `left/top/width/height`, чтобы сохранять состояние между перерисовками.

## API (Props / Inputs / Outputs)
| Name     | Type                  | Default | Description |
|----------|-----------------------|---------|-------------|
| `render` | `(log, autoScroll)`   | —       | Обновляет список записей и статусы. `log` — массив `GameState['log']`, `autoScroll` — флаг из движка. |

## States and Examples
- **Empty log:** `render([], false)` очищает список и выводит «Новых событий нет» в превью, автопрокрутка отображается как «Выкл.».
- **Expanded:** отображается весь журнал, ресайзеры активны, кнопка показывает «Свернуть».
- **Collapsed:** окно уменьшается до заголовка и последней записи, ресайзеры скрыты, кнопка меняет текст на «Развернуть».
- **Overflow:** при большом количестве записей включается вертикальный скролл, автопрокрутка перемещает его к верхней записи.

## Lifecycle
- **Init:** `new LogOverlayWidget()` — подключает стили, создаёт DOM, навешивает обработчики drag/resize/toggle.
- **Update:** `render` вызывается из `GameLayout` при каждом изменении `GameState`.
- **Destroy:** не требует дополнительных действий, но при необходимости достаточно удалить `root` и снять слушатели (обработчики вешаются на сам элемент и `window` только на время drag/resize).
- **Dependencies:** только браузерный DOM, никаких внешних библиотек.

## Integration Example
```ts
import { LogOverlayWidget } from "../log-overlay/log-overlay";
import type { GameState } from "../game-engine/game-engine";

const overlay = new LogOverlayWidget();

function onState(state: GameState) {
  overlay.render(state.log, state.autoScrollLog);
}
```
